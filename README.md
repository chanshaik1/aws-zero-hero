### What is AWS CloudWatch 
- AWS CloudWatch is a powerful monitoring and observability service designed to provide comprehensive insights into your AWS resources and applications.
- By collecting and tracking metrics, monitoring log files, and setting alarms, CloudWatch enables you to maintain the health and performance of your infrastructure and applications.

### Key Features of CloudWatch

#### 1. **Metrics**
- **Resource Monitoring**: CloudWatch can monitor various AWS resources such as EC2 instances, RDS databases, ELB load balancers, and more.
- **Custom Metrics**: You can also monitor custom metrics generated by your applications.
- **Real-Time Metrics**: It provides real-time metrics that can help troubleshoot issues and optimize resource utilization.
  
#### Examples:
- **EC2 Instance Metrics**: CPU utilization, disk reads/writes, network traffic.
- **RDS Metrics**: Database connections, read/write IOPS, free storage space.

#### 2. **Logs**
- **Log Collection**: CloudWatch can collect log data from AWS resources and on-premises servers.
- **Log Insights**: Users can search, filter, and analyze log data to gain insights into application health and performance.
  
#### Examples:
- **Application Logs**: Errors, warnings, and informational messages from your applications.
- **System Logs**: Operating system logs, such as `/var/log/messages` on Linux or Event Viewer logs on Windows.

#### 3. **Alarms**
- **Threshold-Based Alarms**: Set alarms to trigger actions based on specific metric thresholds.
- **Notifications and Actions**: Alarms can send notifications via SNS or trigger actions like auto-scaling or Lambda functions.
  
#### Examples:
- **CPU Utilization Alarm**: Notify when CPU utilization exceeds 80% for an extended period.
- **Error Log Alarm**: Alert when a specific error message appears in the application logs.

#### 4. **Dashboards**
- **Customizable Dashboards**: CloudWatch provides dashboards that can be customized to display metrics and logs.
- **Unified View**: Dashboards offer a unified view of your AWS resources and applications, making it easier to monitor and understand their health and performance.
  
#### Examples:
- **Resource Utilization Dashboard**: Visualize CPU, memory, and network usage for EC2 instances.
- **Application Performance Dashboard**: Track response times, error rates, and throughput for web applications.

### Benefits of Using AWS CloudWatch

- **Enhanced Visibility**: Gain comprehensive insights into your AWS resources and applications.
- **Proactive Monitoring**: Set up alarms to detect and respond to potential issues before they impact your operations.
- **Cost Optimization**: Monitor resource utilization to identify and eliminate underused resources, reducing costs.
- **Operational Efficiency**: Use logs and metrics to troubleshoot and resolve issues quickly, minimizing downtime.

### Example Use Case

Suppose you have a web application hosted on EC2 instances behind an ELB load balancer. You want to ensure the application performs optimally and respond quickly to any issues. Hereâ€™s how you can use CloudWatch:

1. **Monitor EC2 Metrics**: Track CPU utilization, memory usage, and disk I/O to ensure the instances are performing well.
2. **Collect Application Logs**: Use CloudWatch Logs to gather and analyze application logs for errors and performance bottlenecks.
3. **Set Alarms**: Create alarms to notify you if CPU utilization exceeds 80% or if specific error messages appear in the logs.
4. **Create Dashboards**: Build a dashboard to visualize EC2 instance metrics, application performance, and log insights in one place.

By leveraging AWS CloudWatch, you can maintain a high level of operational excellence, quickly detect and resolve issues, and optimize the performance and cost of your AWS resources.

----
### Creating a Log Group via AWS Management Console

1. **Navigate to CloudWatch**:
   - Sign in to the AWS Management Console.
   - Open the CloudWatch console at [https://console.aws.amazon.com/cloudwatch/](https://console.aws.amazon.com/cloudwatch/).

2. **Access Logs**:
   - In the left-hand navigation pane, click on **Logs**.

3. **Create Log Group**:
   - Click the **Create log group** button.
   - Enter a name for your log group in the **Log group name** field.
   - Optionally, you can add tags to your log group for better resource management and tracking.
   - Click the **Create log group** button.

----
### Lab Session - Sending VPC Flow Logs to a CloudWatch Log Group

### Step 1: Create a CloudWatch Log Group

If you haven't already created a CloudWatch Log Group, follow these steps:

1. **Navigate to CloudWatch**:
   - Sign in to the AWS Management Console.
   - Open the CloudWatch console at [https://console.aws.amazon.com/cloudwatch/](https://console.aws.amazon.com/cloudwatch/).

2. **Access Logs**:
   - In the left-hand navigation pane, click on **Logs**.

3. **Create Log Group**:
   - Click the **Create log group** button.
   - Enter a name for your log group, such as `VPCFlowLogs`.
   - Optionally, you can add tags to your log group.
   - Click the **Create log group** button.

### Step 2: Create an IAM Role

You need an IAM role that has the necessary permissions to publish flow logs to CloudWatch Logs.

1. **Navigate to IAM**:
   - Open the IAM console at [https://console.aws.amazon.com/iam/](https://console.aws.amazon.com/iam/).

2. **Create Role**:
   - In the left-hand navigation pane, click on **Roles** and then **Create role**.
   - Select **AWS Service** and then **EC2**.
   - Click **Next: Permissions**.

3. **Attach Policies**:
   - Attach the following policies:
     - `CloudWatchLogsFullAccess`
     - `AmazonEC2FullAccess`

4. **Create Role**:
   - Click **Next: Tags**, then **Next: Review**.
   - Enter a role name, such as `VPCFlowLogsRole`.
   - Click **Create role**.

### Step 3: Create VPC Flow Logs

1. **Navigate to VPC**:
   - Open the VPC console at [https://console.aws.amazon.com/vpc/](https://console.aws.amazon.com/vpc/).

2. **Access Flow Logs**:
   - In the left-hand navigation pane, click on **Your VPCs**.
   - Select the VPC for which you want to create a flow log.
   - In the **Actions** dropdown menu, select **Create flow log**.

3. **Configure Flow Log**:
   - **Filter**: Choose the type of traffic to capture (e.g., All, Reject, or Accept).
   - **Destination**: Select **Send to CloudWatch Logs**.
   - **Log Group**: Enter the name of the CloudWatch Log Group you created (`VPCFlowLogs`).
   - **IAM Role**: Select the IAM role you created (`VPCFlowLogsRole`).

4. **Create Flow Log**:
   - Click the **Create flow log** button.

### Verifying Flow Logs

1. **Navigate to CloudWatch Logs**:
   - Go to the CloudWatch console and select **Logs** from the left-hand navigation pane.

2. **Check Log Streams**:
   - Find and select the log group `VPCFlowLogs`.
   - You should see log streams corresponding to the network interfaces within your VPC, containing the flow log records.

----
### Lab Session - Setting Up a CloudWatch Alarm for an EC2 Instance

1. **Sign in to AWS Management Console:**
   - Navigate to the CloudWatch Dashboard at [AWS Management Console](https://console.aws.amazon.com/cloudwatch/).

2. **Create Alarm:**
   - Click on "Alarms" in the left menu and then "Create alarm."
   - Choose the metric (e.g., CPU utilization) for the EC2 instance.
   - Configure the threshold and actions (e.g., send notification to SNS topic).
   - Review and create the alarm.
----
### What is AWS CloudTrail?

**AWS CloudTrail:** A service that enables governance, compliance, and operational and risk auditing of your AWS account. It records AWS API calls made on your account and delivers log files to an Amazon S3 bucket.

### Log Event Types in CloudTrail

1. **Management Events:** API calls related to management operations in AWS services (e.g., create, delete, modify).
2. **Data Events:** API calls related to data plane operations performed on resources in AWS services (e.g., S3 object-level API calls).
----
### Lab Session - Setting Up AWS CloudTrail to Send Logs to an S3 Bucket

1. **Sign in to AWS Management Console:**
   - Navigate to the CloudTrail Dashboard at [AWS Management Console](https://console.aws.amazon.com/cloudtrail/).

2. **Create Trail:**
   - Click on "Trails" in the left menu and then "Create trail."
   - Enter a name for the trail and choose the S3 bucket where log files will be delivered.
   - Configure trail settings, including log file encryption and CloudWatch Logs integration.
   - Review and create the trail.
----
### Lab Session - Deletion of CloudTrail

1. **Sign in to AWS Management Console:**
   - Navigate to the CloudTrail Dashboard at [AWS Management Console](https://console.aws.amazon.com/cloudtrail/).

2. **Delete CloudTrail:**
   - Select the CloudTrail trail you want to delete.
   - Click on "Actions > Delete trail."
   - Confirm the deletion.
